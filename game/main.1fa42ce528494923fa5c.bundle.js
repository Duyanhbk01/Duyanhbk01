/*! For license information please see main.1fa42ce528494923fa5c.bundle.js.LICENSE.txt */
(()=>{var e,t={18:(e,t,i)=>{"use strict";i(260);class r{constructor(e){this.scene=e,this.imageGame=new Phaser.GameObjects.Image(this.scene,0,0,"game1").setScale(1).setOrigin(0,0),this.createArrayColor()}createArrayColor(){let e=Math.round(this.imageGame.width/29),t=Math.round(this.imageGame.height/29);this.arrayColor=new Array,this.totalTileOfColor=new Array;for(let i=0;i<e;i++)for(let e=0;e<t;e++){let t=this.scene.textures.getPixel(29*i,29*e,this.imageGame.texture.key);if(-1==this.arrayColor.indexOf(t.color))this.arrayColor.push(t.color),this.totalTileOfColor[this.totalTileOfColor.length]=1;else{let e=this.arrayColor.indexOf(t.color);this.totalTileOfColor[e]+=1}}}getArrayColor(){return this.arrayColor}getColorAfterGrayScale(e){let t=this.numberToColour(this.arrayColor[e]),i=this.rgb2grayscale(t[0],t[1],t[2]);return(i<<16)+(i<<8)+i}numberToColour(e){return[(16711680&e)>>16,(65280&e)>>8,255&e]}LightenDarkenColor(e,t){return(255&e)+t|(e>>8&255)+t<<8|(e>>16)+t<<16}rgb2grayscale(e,t,i){return.3*e+.59*t+.11*i}getImageGame(){return this.imageGame}getTotalTileOfColor(){return this.totalTileOfColor}}var s=i(439);class a extends Phaser.GameObjects.Rectangle{constructor(e,t,i,r,s,a,o,l){super(e,t,i,s,a,o,l),this.numberOfColor=r,this.setOrigin(0,0)}getTextOfTile(){return this.textOfTile}getNumberOfColor(){return this.numberOfColor}setTextOfTile(e){this.textOfTile=e}setNumberOfColor(e){this.numberOfColor=e}}class o extends a{constructor(e,t,i,r,s,a,o,l){super(e,t,i,r,s,a,o,l),this.totalTile=0,this.totalTileMatch=0,this.setOrigin(0,0),this.createLoadingGrapic(),this.createProgressGrapic(),this.createImageSuccess()}createImageSuccess(){this.imageSuccess=new Phaser.GameObjects.Image(this.scene,this.x+this.width/2,this.y+this.height/2,"success").setDepth(4).setScale(.25),this.scene.add.existing(this.imageSuccess),this.imageSuccess.visible=!1}createProgressGrapic(){this.progressGrapic=this.scene.add.graphics(),this.progressGrapic.clear(),this.fillColor>12303291?this.progressGrapic.fillStyle(0,1):this.progressGrapic.fillStyle(16777215,1),this.progressGrapic.fillRoundedRect(this.x+19,this.y+110,108,14,6).setDepth(3),this.progressGrapic.visible=!1}createLoadingGrapic(){this.loadingGrapic=this.scene.add.graphics()}updateLoadingGrapic(){}createTextOfTile(){this.setTextOfTile(new Phaser.GameObjects.BitmapText(this.scene,this.x+this.width/2,this.y+this.height/2+25,"gothic",this.getNumberOfColor().toString(),50).setDepth(2).setOrigin(.5,1)),this.editColorText(),this.scene.add.existing(this.getTextOfTile())}editColorText(){this.fillColor>12303291?this.getTextOfTile().tint=0:this.getTextOfTile().tint=16777215}scrollX(e){this.imageSuccess.x+=e,this.getTextOfTile().x+=e,this.loadingGrapic.x+=e,this.progressGrapic.x+=e,this.x+=e}getProgressGraphic(){return this.progressGrapic}getLoadingGraphic(){return this.loadingGrapic}setTotalTile(e){this.totalTile=e}handleLoading(e){this.totalTileMatch+=1,this.loadingGrapic.clear(),this.fillColor<12303291?this.loadingGrapic.fillStyle(0,1):this.loadingGrapic.fillStyle(16777215,1);let t=this.totalTileMatch/this.totalTile,i=725*Math.ceil((e+1)/10);this.loadingGrapic.fillRoundedRect(this.x+25+i,this.y+113,95*t,7.5,4).setDepth(4),this.totalTileMatch==this.totalTile&&this.addEffect()}addEffect(){this.scene.tweens.add({targets:this,duration:300,scale:{from:1,to:.7},onStart:()=>{this.x+=this.width/2,this.y+=this.height/2,this.setOrigin(.5,.5),this.loadingGrapic.clear(),this.progressGrapic.clear()},onComplete:(e,t)=>{this.getTextOfTile().destroy(),this.scene.add.tween({targets:this,duration:100,yoyo:!0,angle:{from:-15,to:15},repeat:3,onComplete:()=>{this.angle=0}}),this.scene.tweens.add({targets:this,delay:800,duration:250,scale:{from:.7,to:1},onComplete:()=>{this.imageSuccess.visible=!0,this.active=!1,this.removeInteractive()}})}})}}class l extends Phaser.GameObjects.Rectangle{constructor(e,t,i,r,s,a,o,l,h){super(e,r,s,a+725,o,16777215,h),this.isScroll=!1,this.arrayColor=t,this.totalTileOfColor=i,this.setOrigin(0,0),this.setInteractive(),this.createTile(),this.createLineOfTable(),this.createScroller(),this.setFirstCurrentTile(),this.inputHandler(),this.createStateOfPage(),e.add.existing(this)}createStateOfPage(){let e=Math.ceil(this.arrayTile.length/10)+1;this.stateOfpage=new Array(e),this.stateOfpage[0]=this.scene.add.image(this.scene.sys.canvas.width/2-e/2*22,this.scene.sys.canvas.height-60,"star").setScale(.04).setDepth(2);for(let t=1;t<this.stateOfpage.length;t++)this.stateOfpage[t]=this.scene.add.image(this.stateOfpage[0].x+e/2*22*t,this.scene.sys.canvas.height-58,"cricle").setScale(.015).setDepth(2);this.currentStateOfpage=this.stateOfpage[1],this.currentStateOfpage.setTint(4473924)}createLineOfTable(){this.scene.add.line(this.x,this.y-1,0,0,1e5,0,0),this.lineBetweenTool=this.scene.add.line(this.x+724,this.y+143,this.x,0,this.x,290,0).setDepth(1)}setFirstCurrentTile(){this.currentTile=this.arrayTile[3],this.currentTile.getTextOfTile().setFontSize(65),this.currentTile.getProgressGraphic().visible=!0,this.currentTile.getLoadingGraphic().visible=!0,this.scene.registry.set("currentTile",this.currentTile)}createTile(){this.arrayTile=new Array;let e=0,t=0;for(let i=0;i<this.arrayColor.length;i++)i%5==0&&0!=i&&(i%10!=0&&(t-=5),e=0==e?1:0),this.arrayTile[i]=new o(this.scene,145*t+this.x+725,145*e+this.y,i,145,145,this.arrayColor[i]).setDepth(1),this.arrayTile[i].setTotalTile(this.totalTileOfColor[i]),this.arrayTile[i].setInteractive().createTextOfTile(),this.scene.add.existing(this.arrayTile[i]),t++}createScroller(){this.lastScroller=0;let e=Math.floor(this.arrayColor.length/10)+1;this.scroller=new s.Z(this,{bounds:[725*-e,0],value:-725,slidingDeceleration:1e9,backDeceleration:1e4,orientation:"horizontal",valuechangeCallback:e=>{if(e>0)return;let t=e-this.x;this.x=e,this.lineBetweenTool.x+=t;for(let e=0;e<this.getArrayTile().length;e++)this.getArrayTile()[e].scrollX(t)}}),this.dragstartScroller(),this.dragendScroller()}dragstartScroller(){this.scroller.on("dragstart",(()=>{this.isScroll=!0}))}dragendScroller(){let e=Math.floor(this.arrayColor.length/10)+1;this.scroller.on("dragend",(()=>{this.isScroll=!1;let t=this.scroller.value,i=0;t<725&&t>0||t<725*-e||(i=t>this.lastScroller?725*Math.ceil(t/725):725*-Math.ceil(-t/725),this.scrollOnePage(t,i))}))}scrollOnePage(e,t){this.scene.tweens.addCounter({duration:150,from:e,to:t,onUpdate:e=>{let t=e.getValue()-this.x;this.lineBetweenTool.x+=t,this.x=e.getValue();for(let e=0;e<this.getArrayTile().length;e++)this.getArrayTile()[e].scrollX(t)},onComplete:(e,i)=>{this.lastScroller=t,this.scroller.value=this.lastScroller}}),this.editStateOfPage(t)}editStateOfPage(e){let t=-1*e/725;this.currentStateOfpage.clearTint(),this.currentStateOfpage=this.stateOfpage[t].setTint(4473924)}getArrayTile(){return this.arrayTile}getCurrentTile(){return this.currentTile}inputHandler(){this.arrayTile.forEach(((e,t,i)=>{e.on("pointerup",((t,i,r,s)=>{this.isScroll||(this.currentTile.getTextOfTile().setFontSize(50),this.currentTile.getProgressGraphic().visible=!1,this.currentTile.getLoadingGraphic().visible=!1,e.getTextOfTile().setFontSize(60),e.getProgressGraphic().visible=!0,e.getLoadingGraphic().visible=!0,this.currentTile=e,this.scene.registry.set("currentTile",this.currentTile))}))}))}handleAfterMatch(){let e=this.currentTile.getNumberOfColor();this.arrayTile[e].handleLoading(e)}}class h extends Phaser.Scene{constructor(){super({key:"ColorTableScene"}),this.currentMatchTile=0}preload(){}create(){this.colorManager=new r(this),this.registry.set("colorManager",this.colorManager);let e=Math.floor(this.colorManager.getArrayColor().length/10);this.colorTable=new l(this,this.colorManager.getArrayColor(),this.colorManager.getTotalTileOfColor(),0,1e3,725*(e+3),400),this.input.topOnly=!1}update(){this.registry.get("counterMatchTile")>this.currentMatchTile&&(this.currentMatchTile+=1,this.colorTable.handleAfterMatch())}}class n extends Phaser.Scene{constructor(){super({key:"BootScene"})}preload(){this.cameras.main.setBackgroundColor(0),this.createLoadingGraphics(),this.load.on("progress",(e=>{this.progressBar.clear(),this.progressBar.fillStyle(8971347,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)}),this),this.load.on("complete",(()=>{this.progressBar.destroy(),this.loadingBar.destroy()}),this),this.load.pack("preload","./assets/pack.json","preload"),this.load.bitmapFont("gothic","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.png","https://raw.githubusercontent.com/rexrainbow/phaser3-rex-notes/master/assets/fonts/gothic.xml")}update(){this.scene.start("ColorTableScene"),this.scene.start("GamePlayScene")}create(){}createLoadingGraphics(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(16777215,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}var c=i(244);class g extends a{constructor(e,t,i,r,s,a,o,l){super(e,t,i,r,s,a,o,l),this.matchedColor=!1,this.iswrongColor=!1,this.wrongColor=0,this.setOrigin(0,0)}addNumberColor(e){if(e)return this.scene.add.existing(e),void this.setTextOfTile(e);this.setTextOfTile(new Phaser.GameObjects.BitmapText(this.scene,this.x+this.width/2,this.y+this.height/2,"gothic",this.getNumberOfColor().toString(),15).setDepth(1).setOrigin(.5,.5)),this.getTextOfTile().tint=0,this.scene.add.existing(this.getTextOfTile())}editProperties(e=1){if(this.matchedColor)return this.isStroked=!1,void(this.fillAlpha=1);e<=1.5?(e<=1&&(this.isStroked=!1),this.getTextOfTile().alpha=0):(this.isStroked=!0,this.getTextOfTile().alpha=e/3),1==this.isWrongColor()?this.fillAlpha=1/e:this.fillAlpha=e>=3?0:1/(3*e)}afterMatchedColor(e){this.isStroked=!1,this.matchedColor=!0,this.fillAlpha=1,this.getTextOfTile().alpha=0,this.fillColor=e}editWrongColor(e,t){this.matchedColor||(this.iswrongColor=!0,this.fillColor=e,this.wrongColor=e,this.fillAlpha=1/t)}isWrongColor(){return this.iswrongColor}getWrongColor(){return this.wrongColor}isMatchedColor(){return this.matchedColor}setMatchedColor(){this.matchedColor=!0}}class d{constructor(e,t,i){this.scene=e,this.imageGame=t.getImageGame(),this.colorManager=t,this.currentTile=i,this.createData(),this.showTile(1,this.currentTile)}createData(){this.row=Math.round(this.imageGame.width/29),this.column=Math.round(this.imageGame.height/29),this.createArrayTile(this.row,this.column)}createArrayTile(e,t){this.arrayTile=new Array(e);for(let i=0;i<e;i++)this.arrayTile[i]=new Array(t);for(let i=0;i<e;i++)for(let e=0;e<t;e++){let t=this.scene.textures.getPixel(29*i,29*e,"game1");this.arrayTile[i][e]=new g(this.scene,29*i,29*e+200,this.colorManager.getArrayColor().indexOf(t.color),29,29,16777215),this.arrayTile[i][e].setInteractive(),this.arrayTile[i][e].addNumberColor(),this.arrayTile[i][e].setStrokeStyle(1,0)}}showTile(e=1,t){for(let i=0;i<this.arrayTile.length;i++)for(let r=0;r<this.arrayTile[0].length;r++){let s=this.colorManager.getColorAfterGrayScale(this.arrayTile[i][r].getNumberOfColor());this.scene.add.existing(this.arrayTile[i][r]).setOrigin(0,0),this.arrayTile[i][r].editProperties(e),this.arrayTile[i][r].getNumberOfColor()==t.getNumberOfColor()?this.arrayTile[i][r].fillColor=0:this.arrayTile[i][r].fillColor=s}}editAfterZoom(e=1,t){for(let i=0;i<this.arrayTile.length;i++)for(let r=0;r<this.arrayTile[0].length;r++)if(this.arrayTile[i][r].editProperties(e),!this.arrayTile[i][r].isMatchedColor()&&(1==this.arrayTile[i][r].isWrongColor()&&(this.arrayTile[i][r].fillColor=this.arrayTile[i][r].getWrongColor()),this.arrayTile[i][r].getNumberOfColor()==t.getNumberOfColor())){if(1==this.arrayTile[i][r].isWrongColor())continue;this.arrayTile[i][r].fillColor=0,this.arrayTile[i][r].fillAlpha=.3}}editAfterChooseColor(e,t){for(let i=0;i<this.arrayTile.length;i++)for(let r=0;r<this.arrayTile[0].length;r++){let s=this.colorManager.getColorAfterGrayScale(this.arrayTile[i][r].getNumberOfColor());this.arrayTile[i][r].editProperties(e),this.arrayTile[i][r].isMatchedColor()||(this.arrayTile[i][r].getNumberOfColor()==t.getNumberOfColor()?1==this.arrayTile[i][r].isWrongColor()?this.arrayTile[i][r].fillColor=this.colorManager.LightenDarkenColor(this.arrayTile[i][r].getWrongColor(),12):(this.arrayTile[i][r].fillColor=0,this.arrayTile[i][r].fillAlpha=.3):1==this.arrayTile[i][r].isWrongColor()?this.arrayTile[i][r].fillColor=this.arrayTile[i][r].getWrongColor():this.arrayTile[i][r].fillColor=s)}}getArrayTile(){return this.arrayTile}getCurrentTile(){return this.currentTile}setCurrentTile(e){this.currentTile=e}}var u=i(839);class T extends Phaser.Scene{constructor(){super({key:"GamePlayScene"}),this.counterMatchTile=0,this.isMoveCamera=!1,this.numberOfMove=!1,this.isColoringUp=!1,this.isColoringMove=!1,this.nearestPointerUp=!1,this.counterPointerDown=0}preload(){}create(){this.scene.bringToTop("ColorTableScene"),this.colorManager=this.registry.get("colorManager"),this.currentTile=this.registry.get("currentTile"),this.tileGameManager=new d(this,this.colorManager,this.currentTile),this.cameras.main.setOrigin(.5,.5),this.cameras.main.setZoom(1),this.cameras.main.setBounds(-200,-100,1200,1500),this.createDragScale(),this.inputHandler()}createDragScale(){let e=this.cameras.main.setZoom(1),t=new u.aj(this,{enable:!0});t.on("drag1",(t=>{if(!this.isColoringUp&&!this.isColoringMove){this.numberOfMove=!0;var i=t.drag1Vector;e.scrollX-=i.x/e.zoom,e.scrollY-=i.y/e.zoom,this.isMoveCamera=!0}})),t.on("drag1end",(()=>{this.isMoveCamera=!1}),this),t.on("pinch",(t=>{if(this.isColoringUp)return;this.numberOfMove=!0,this.isMoveCamera=!0;let i=t.scaleFactor;e.zoom*=i,this.tileGameManager.editAfterZoom(e.zoom,this.currentTile)}),this),t.on("pinchend",(e=>{this.isColoringMove=!1,this.isMoveCamera=!1}),this)}inputHandler(){this.tileGameManager.getArrayTile().forEach((e=>{e.forEach((e=>{this.handlePointerUpTile(e),this.handlePointerDownTile(e)}))})),this.input.on("pointerdown",(()=>{if(this.counterPointerDown+=1,this.nearestPointerUp=!1,this.isColoringMove)return this.isColoringMove=!1,void(this.isColoringUp=!1);this.time.addEvent({delay:50,callback:()=>{this.isMoveCamera||1!=this.counterPointerDown||(this.isColoringUp=!0),this.counterPointerDown=0}}),this.time.addEvent({delay:400,callback:()=>{this.nearestPointerUp?this.nearestPointerUp=!1:(this.isColoringUp&&(this.isColoringMove=!0),this.counterPointerDown=0)}})}))}handlePointerDownTile(e){e.on("pointermove",(t=>{if(t.isDown&&this.isColoringMove&&!this.isMoveCamera)if(this.numberOfMove)this.numberOfMove=!1;else if(e.getNumberOfColor()==this.currentTile.getNumberOfColor()&&0==e.isMatchedColor())e.afterMatchedColor(this.currentTile.fillColor),this.counterMatchTile+=1,this.registry.set("counterMatchTile",this.counterMatchTile);else{let t=this.cameras.main.zoom;e.editWrongColor(this.currentTile.fillColor,t)}}))}handlePointerUpTile(e){e.on("pointerup",(t=>{if(this.nearestPointerUp=!0,this.isColoringMove=!1,this.numberOfMove)return this.numberOfMove=!1,void(this.isColoringUp=!1);if(this.isColoringUp)if(this.isColoringUp=!1,e.getNumberOfColor()==this.currentTile.getNumberOfColor()&&0==e.isMatchedColor())e.afterMatchedColor(this.currentTile.fillColor),this.counterMatchTile+=1,this.registry.set("counterMatchTile",this.counterMatchTile);else{let t=this.cameras.main.zoom;e.editWrongColor(this.currentTile.fillColor,t)}}))}update(){if(this.currentTile=this.registry.get("currentTile"),this.currentTile!=this.tileGameManager.getCurrentTile()){let e=this.cameras.main.zoom;this.tileGameManager.editAfterChooseColor(e,this.currentTile),this.tileGameManager.setCurrentTile(this.currentTile)}}}const f={title:"Pixel Art - Color By Number:",version:"1.0.0",width:725,height:1394,zoom:1,type:Phaser.AUTO,backgroundColor:"#EEEEEE",plugins:{global:[{key:"rexScroller",plugin:c.Z,start:!0}]},scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},parent:"game",input:{keyboard:!0,mouse:!0,touch:{capture:!0}},disableContextMenu:!0,physics:{default:"arcade",arcade:{debug:!1}},render:{antialias:!0},scene:[n,h,T]};class p extends Phaser.Game{constructor(e){super(e)}}window.addEventListener("load",(()=>{new p(f)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},i={};function r(e){var s=i[e];if(void 0!==s)return s.exports;var a=i[e]={exports:{}};return t[e].call(a.exports,a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,i,s,a)=>{if(!i){var o=1/0;for(c=0;c<e.length;c++){for(var[i,s,a]=e[c],l=!0,h=0;h<i.length;h++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](i[h])))?i.splice(h--,1):(l=!1,a<o&&(o=a));if(l){e.splice(c--,1);var n=s();void 0!==n&&(t=n)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,s,a]},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,i)=>{var s,a,[o,l,h]=i,n=0;if(o.some((t=>0!==e[t]))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(h)var c=h(r)}for(t&&t(i);n<o.length;n++)a=o[n],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},i=self.webpackChunkphaser_project_template=self.webpackChunkphaser_project_template||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),r.O(void 0,[216],(()=>r(18)));var s=r.O(void 0,[216],(()=>r(204)));s=r.O(s)})();